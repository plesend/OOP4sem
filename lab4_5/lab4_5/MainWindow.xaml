<Window x:Class="lab4_5.MainWindow" Style="{DynamicResource WindowStyle}"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:lab4_5"
        xmlns:svg="http://sharpvectors.codeplex.com/runtime/"
        mc:Ignorable="d"
        Title="Главная"
        Width="1142" Height="670"
        MinWidth="900" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        Icon="D:\лабораторные работы\ооп\lab4_5\Resources\icon.jpg">
    <Window.DataContext>
        <local:MainWindowViewModel />
    </Window.DataContext>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <DataTemplate x:Key="ProductTemplate">
            <Border CornerRadius="8" Background="White" BorderBrush="LightGray" BorderThickness="1" Margin="0,5,5,0">
                <StackPanel>
                    <Image Source="{Binding ImagePath}" Stretch="Uniform" Height="100"
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding Name}" FontWeight="Bold" Margin="10,5,10,0"
                           Height="40" TextAlignment="Right" TextWrapping="Wrap"/>
                    <TextBlock Text="{Binding Description}" Foreground="Gray" Margin="10,5,10,5" TextAlignment="Right"/>
                    <Button Content="Купить" Margin="5,1,5,5" Background="#A578BB"
                        Foreground="White" Height="20" BorderThickness="0"/>
                    <Button Content="Удалить"
        Margin="5,1,5,5"
        Background="Red"
        Foreground="White"
        Height="20"
        BorderThickness="0"
        Visibility="{Binding DataContext.IsAdmin, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BoolToVisibilityConverter}}"
        Command="{Binding DataContext.RemoveProductCommand, RelativeSource={RelativeSource AncestorType=Window}}"
        CommandParameter="{Binding}" />

                </StackPanel>
            </Border>
        </DataTemplate>
    </Window.Resources>

    <Viewbox Stretch="Uniform" StretchDirection="Both">
        <Grid ShowGridLines="False" x:Name="MainPage"  Width="1142" Height="670">
            <Grid.RowDefinitions>
                <RowDefinition Height="75*"/>
                <RowDefinition Height="45*"/>
                <RowDefinition Height="278*"/>
                <RowDefinition Height="255*"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Button
                Style="{DynamicResource SpecialButtonStyle}"
                Content="{DynamicResource ButtonText_Cart}"
                Grid.Row="0"
                Grid.Column="0"
                Margin="20"
                Command="{Binding ChangeThemeCommand}"/>
            <Button Style="{DynamicResource BaseButtonStyle}" Content="{DynamicResource ButtonText_Home}" Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="3" Margin="163,0,154,0"/>
            <Button Style="{DynamicResource BaseButtonStyle}" Content="{DynamicResource ButtonText_Sales}" Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="3" Margin="163,0,163,0"/>
            <Button Style="{DynamicResource BaseButtonStyle}" Content="{DynamicResource ButtonText_AboutUs}" Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="3" Margin="154,0,163,0"/>
            <Button Style="{DynamicResource BaseButtonStyle}" Content="{DynamicResource ButtonText_Profile}" Grid.Row="0" Grid.Column="6" x:Name="ProfileButton" Command="{Binding OpenProfileCommand}"/>
            <Button Style="{DynamicResource BaseButtonStyle}" x:Name="AddProduct" Content="{DynamicResource ButtonText_Manage}" Grid.Row="0" Grid.Column="5" Command="{Binding AddProductCommand}"/>
            <Button Style="{DynamicResource BaseButtonStyle}" Content="🌐" Command="{Binding ChangeLanguageCommand}"  Grid.Row="0" Grid.Column="1" Margin="10"/>

            <StackPanel Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="6" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left" Height="30" Margin="116,0,0,0" Width="700">
                <TextBox Text="{Binding SearchBox, UpdateSourceTrigger=PropertyChanged}" Style="{DynamicResource BaseTextBoxStyle}" Width="650" Height="30" Margin="0,0,10,0" />
                <Button Style="{DynamicResource BaseButtonStyle}" Content="🔍" Width="40" Height="30" Command="{Binding SearchCommand}" />
            </StackPanel>

            <ScrollViewer VerticalScrollBarVisibility="Hidden" Grid.Row="2" Grid.RowSpan="2" Grid.ColumnSpan="7" Margin="163,12,0,0">
                <ItemsControl ItemsSource="{Binding Products}" ItemTemplate="{StaticResource ProductTemplate}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel ItemWidth="150" ItemHeight="220" HorizontalAlignment="Center"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ScrollViewer>

            <Border x:Name="SortBorder" Grid.Row="2" Grid.RowSpan="2" Grid.Column="0" BorderBrush="LightGray" BorderThickness="0" Margin="0,12,0,0">
                <StackPanel>
                    <TextBlock Style="{DynamicResource BaseTextBlockStyle}" Text="{DynamicResource FilterText}" FontWeight="Bold" FontSize="16" Margin="0,5,0,10" HorizontalAlignment="Center"/>
                    <Line StrokeThickness="1" Stroke="#A578BB" X1="0" Y1="0" X2="120" Y2="0" HorizontalAlignment="Center"/>

                    <TextBlock Style="{DynamicResource BaseTextBlockStyle}" Text="{DynamicResource PriceText}" Margin="10,10,0,5"/>
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,5" HorizontalAlignment="Center">
                        <TextBox Text="{Binding FromPrice}" Style="{DynamicResource BaseTextBoxStyle}" Width="60" Height="25" Margin="0,0,10,0" MaxLength="5"/>
                        <TextBox Text="{Binding ToPrice}" Style="{DynamicResource BaseTextBoxStyle}" Width="60" Height="25" MaxLength="5"/>
                    </StackPanel>

                    <TextBlock Style="{DynamicResource BaseTextBlockStyle}" Text="{DynamicResource BrandText}" Margin="10,10,0,5"/>
                    <ComboBox Text="{Binding Brand}" SelectedIndex="{Binding SelectedBrandIndex}" Style="{DynamicResource CmbStyle}" Height="25" Width="120">
                        <ComboBoxItem Content="Все" IsSelected="True"/>
                        <ComboBoxItem Content="Essence"/>
                        <ComboBoxItem Content="L'OREAL"/>
                        <ComboBoxItem Content="Maybelline"/>
                        <ComboBoxItem Content="NYX"/>
                        <ComboBoxItem Content="Revolution"/>
                    </ComboBox>

                    <Button Style="{DynamicResource SpecialButtonStyle}"  x:Name="Adjust" Content="{DynamicResource Adjust}" Width="120" Margin="0,20,0,0" Height="30" Command="{Binding AdjustCommand}"/>
                    <Button Style="{DynamicResource SpecialButtonStyle}" x:Name="Clear" Content="{DynamicResource Clear}" Width="120" Margin="0,20,0,0" Height="30" Command="{Binding ClearCommand}"/>
                </StackPanel>
            </Border>
        </Grid>
    </Viewbox>
</Window>
